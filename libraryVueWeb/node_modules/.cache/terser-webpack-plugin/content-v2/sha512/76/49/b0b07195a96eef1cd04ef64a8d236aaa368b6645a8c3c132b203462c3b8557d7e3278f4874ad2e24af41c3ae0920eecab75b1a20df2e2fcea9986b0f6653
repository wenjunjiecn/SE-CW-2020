{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-f6e7d378\"],{\"0a58\":function(t,e,o){\"use strict\";var n=o(\"760f\"),a=o.n(n);a.a},4945:function(t,e,o){\"use strict\";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"article-detail\",{attrs:{\"is-edit\":!1}})},a=[],s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"div\",{staticClass:\"createPost-container\"},[o(\"el-form\",{ref:\"postForm\",staticClass:\"form-container\",attrs:{model:t.postForm,rules:t.rules}},[o(\"sticky\",{attrs:{\"z-index\":10,\"class-name\":\"sub-navbar \"+t.postForm.status}},[o(\"el-button\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"success\"},on:{click:t.submitForm}},[t._v(\"\\n        发布\\n      \")]),t._v(\" \"),o(\"el-button\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loading,expression:\"loading\"}],attrs:{type:\"warning\"},on:{click:t.draftForm}},[t._v(\"\\n        保存为草稿\\n      \")])],1),t._v(\" \"),o(\"div\",{staticClass:\"createPost-main-container\"},[o(\"el-row\",[o(\"h1\",[t._v(\"发布公告\")]),t._v(\" \"),o(\"el-col\",{attrs:{span:24}},[o(\"el-form-item\",{staticStyle:{\"margin-bottom\":\"40px\"},attrs:{prop:\"title\"}},[o(\"MDinput\",{attrs:{maxlength:100,name:\"name\",required:\"\"},model:{value:t.postForm.title,callback:function(e){t.$set(t.postForm,\"title\",e)},expression:\"postForm.title\"}},[t._v(\"\\n              标题\\n            \")])],1),t._v(\" \"),o(\"div\",{staticClass:\"postInfo-container\"},[o(\"el-row\",[o(\"el-col\",{attrs:{span:8}},[o(\"el-form-item\",{staticClass:\"postInfo-container-item\",attrs:{\"label-width\":\"60px\",label:\"作者:\"}},[o(\"el-select\",{attrs:{\"remote-method\":t.getRemoteUserList,filterable:\"\",\"default-first-option\":\"\",remote:\"\",placeholder:\"Search user\"},model:{value:t.postForm.author,callback:function(e){t.$set(t.postForm,\"author\",e)},expression:\"postForm.author\"}},t._l(t.userListOptions,(function(t,e){return o(\"el-option\",{key:t+e,attrs:{label:t,value:t}})})),1)],1)],1),t._v(\" \"),o(\"el-col\",{attrs:{span:10}},[o(\"el-form-item\",{staticClass:\"postInfo-container-item\",attrs:{\"label-width\":\"120px\",label:\"发布时间:\"}},[o(\"el-date-picker\",{attrs:{type:\"datetime\",format:\"yyyy-MM-dd HH:mm:ss\",placeholder:\"Select date and time\"},model:{value:t.displayTime,callback:function(e){t.displayTime=e},expression:\"displayTime\"}})],1)],1),t._v(\" \"),o(\"el-col\",{attrs:{span:6}},[o(\"el-form-item\",{staticClass:\"postInfo-container-item\",attrs:{\"label-width\":\"90px\",label:\"公告优先级:\"}},[o(\"el-rate\",{staticStyle:{display:\"inline-block\"},attrs:{max:3,colors:[\"#99A9BF\",\"#F7BA2A\",\"#FF9900\"],\"low-threshold\":1,\"high-threshold\":3},model:{value:t.postForm.importance,callback:function(e){t.$set(t.postForm,\"importance\",e)},expression:\"postForm.importance\"}})],1)],1)],1)],1)],1)],1),t._v(\" \"),o(\"el-form-item\",{staticStyle:{\"margin-bottom\":\"40px\"},attrs:{\"label-width\":\"70px\",label:\"摘要:\"}},[o(\"el-input\",{staticClass:\"article-textarea\",attrs:{rows:1,type:\"textarea\",autosize:\"\",placeholder:\"请输入内容\"},model:{value:t.postForm.content_short,callback:function(e){t.$set(t.postForm,\"content_short\",e)},expression:\"postForm.content_short\"}}),t._v(\" \"),o(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.contentShortLength,expression:\"contentShortLength\"}],staticClass:\"word-counter\"},[t._v(t._s(t.contentShortLength)+\"words\")])],1),t._v(\" \"),o(\"el-form-item\",{staticStyle:{\"margin-bottom\":\"30px\"},attrs:{prop:\"content\"}},[o(\"Tinymce\",{ref:\"editor\",attrs:{height:400},model:{value:t.postForm.content,callback:function(e){t.$set(t.postForm,\"content\",e)},expression:\"postForm.content\"}})],1)],1)],1)],1)},r=[],i=(o(\"7f7f\"),o(\"8256\")),l=o(\"70a2\"),c=o(\"1aba\"),m=o(\"b804\"),p=o(\"61f7\"),u=o(\"2423\"),d=o(\"828d\"),f=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},h=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"aside\",[t._v(\"\\n  Creating and editing pages cannot be cached by keep-alive because keep-alive include does not currently support\\n  caching based on routes, so it is currently cached based on component name. If you want to achieve a similar caching\\n  effect, you can use a browser caching scheme such as localStorage. Or do not use keep-alive include to cache all\\n  pages directly. See details\\n  \"),o(\"a\",{attrs:{href:\"https://panjiachen.github.io/vue-element-admin-site/guide/essentials/tags-view.html\",target:\"_blank\"}},[t._v(\"Document\")])])}],g=o(\"2877\"),v={},b=Object(g[\"a\"])(v,f,h,!1,null,null,null),_=b.exports,w=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"el-dropdown\",{attrs:{\"show-timeout\":100,trigger:\"click\"}},[o(\"el-button\",{attrs:{plain:\"\"}},[t._v(\"\\n    \"+t._s(t.comment_disabled?\"Comment: closed\":\"Comment: opened\")+\"\\n    \"),o(\"i\",{staticClass:\"el-icon-caret-bottom el-icon--right\"})]),t._v(\" \"),o(\"el-dropdown-menu\",{staticClass:\"no-padding\",attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[o(\"el-dropdown-item\",[o(\"el-radio-group\",{staticStyle:{padding:\"10px\"},model:{value:t.comment_disabled,callback:function(e){t.comment_disabled=e},expression:\"comment_disabled\"}},[o(\"el-radio\",{attrs:{label:!0}},[t._v(\"\\n          Close comment\\n        \")]),t._v(\" \"),o(\"el-radio\",{attrs:{label:!1}},[t._v(\"\\n          Open comment\\n        \")])],1)],1)],1)],1)},y=[],F={props:{value:{type:Boolean,default:!1}},computed:{comment_disabled:{get:function(){return this.value},set:function(t){this.$emit(\"input\",t)}}}},x=F,k=Object(g[\"a\"])(x,w,y,!1,null,null,null),$=k.exports,C=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"el-dropdown\",{attrs:{\"hide-on-click\":!1,\"show-timeout\":100,trigger:\"click\"}},[o(\"el-button\",{attrs:{plain:\"\"}},[t._v(\"\\n    Platfroms(\"+t._s(t.platforms.length)+\")\\n    \"),o(\"i\",{staticClass:\"el-icon-caret-bottom el-icon--right\"})]),t._v(\" \"),o(\"el-dropdown-menu\",{staticClass:\"no-border\",attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[o(\"el-checkbox-group\",{staticStyle:{padding:\"5px 15px\"},model:{value:t.platforms,callback:function(e){t.platforms=e},expression:\"platforms\"}},t._l(t.platformsOptions,(function(e){return o(\"el-checkbox\",{key:e.key,attrs:{label:e.key}},[t._v(\"\\n        \"+t._s(e.name)+\"\\n      \")])})),1)],1)],1)},S=[],O={props:{value:{required:!0,default:function(){return[]},type:Array}},data:function(){return{platformsOptions:[{key:\"a-platform\",name:\"a-platform\"},{key:\"b-platform\",name:\"b-platform\"},{key:\"c-platform\",name:\"c-platform\"}]}},computed:{platforms:{get:function(){return this.value},set:function(t){this.$emit(\"input\",t)}}}},j=O,E=Object(g[\"a\"])(j,C,S,!1,null,null,null),D=E.exports,T=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o(\"el-dropdown\",{attrs:{\"show-timeout\":100,trigger:\"click\"}},[o(\"el-button\",{attrs:{plain:\"\"}},[t._v(\"\\n    Link\\n    \"),o(\"i\",{staticClass:\"el-icon-caret-bottom el-icon--right\"})]),t._v(\" \"),o(\"el-dropdown-menu\",{staticClass:\"no-padding no-border\",staticStyle:{width:\"400px\"},attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[o(\"el-form-item\",{staticStyle:{\"margin-bottom\":\"0px\"},attrs:{\"label-width\":\"0px\",prop:\"source_uri\"}},[o(\"el-input\",{attrs:{placeholder:\"Please enter the content\"},model:{value:t.source_uri,callback:function(e){t.source_uri=e},expression:\"source_uri\"}},[o(\"template\",{slot:\"prepend\"},[t._v(\"\\n          URL\\n        \")])],2)],1)],1)],1)},A=[],L={props:{value:{type:String,default:\"\"}},computed:{source_uri:{get:function(){return this.value},set:function(t){this.$emit(\"input\",t)}}}},I=L,P=Object(g[\"a\"])(I,T,A,!1,null,null,null),R=P.exports,U={status:\"draft\",title:\"\",content:\"\",content_short:\"\",source_uri:\"\",image_uri:\"\",display_time:void 0,id:void 0,platforms:[\"a-platform\"],comment_disabled:!1,importance:0},V={name:\"ArticleDetail\",components:{Tinymce:i[\"a\"],MDinput:c[\"a\"],Upload:l[\"a\"],Sticky:m[\"a\"],Warning:_,CommentDropdown:$,PlatformDropdown:D,SourceUrlDropdown:R},props:{isEdit:{type:Boolean,default:!1}},data:function(){var t=this,e=function(e,o,n){\"\"===o?(t.$message({message:e.field+\"为必传项\",type:\"error\"}),n(new Error(e.field+\"为必传项\"))):n()},o=function(e,o,n){o?Object(p[\"d\"])(o)?n():(t.$message({message:\"外链url填写不正确\",type:\"error\"}),n(new Error(\"外链url填写不正确\"))):n()};return{postForm:Object.assign({},U),loading:!1,userListOptions:[],rules:{image_uri:[{validator:e}],title:[{validator:e}],content:[{validator:e}],source_uri:[{validator:o,trigger:\"blur\"}]},tempRoute:{}}},computed:{contentShortLength:function(){return this.postForm.content_short.length},displayTime:{get:function(){return+new Date(this.postForm.display_time)},set:function(t){this.postForm.display_time=new Date(t)}}},created:function(){if(this.isEdit){var t=this.$route.params&&this.$route.params.id;this.fetchData(t)}this.tempRoute=Object.assign({},this.$route)},methods:{fetchData:function(t){var e=this;Object(u[\"a\"])(t).then((function(t){e.postForm=t.data,e.postForm.title+=\"   Article Id:\".concat(e.postForm.id),e.postForm.content_short+=\"   Article Id:\".concat(e.postForm.id),e.setTagsViewTitle(),e.setPageTitle()})).catch((function(t){console.log(t)}))},setTagsViewTitle:function(){var t=\"Edit Article\",e=Object.assign({},this.tempRoute,{title:\"\".concat(t,\"-\").concat(this.postForm.id)});this.$store.dispatch(\"tagsView/updateVisitedView\",e)},setPageTitle:function(){var t=\"Edit Article\";document.title=\"\".concat(t,\" - \").concat(this.postForm.id)},submitForm:function(){var t=this;console.log(this.postForm),this.$refs.postForm.validate((function(e){if(!e)return console.log(\"error submit!!\"),!1;t.loading=!0,t.$notify({title:\"成功\",message:\"发布文章成功\",type:\"success\",duration:2e3}),t.postForm.status=\"published\",t.loading=!1}))},draftForm:function(){0!==this.postForm.content.length&&0!==this.postForm.title.length?(this.$message({message:\"保存成功\",type:\"success\",showClose:!0,duration:1e3}),this.postForm.status=\"draft\"):this.$message({message:\"请填写必要的标题和内容\",type:\"warning\"})},getRemoteUserList:function(t){var e=this;Object(d[\"a\"])(t).then((function(t){t.data.items&&(e.userListOptions=t.data.items.map((function(t){return t.name})))}))}}},B=V,M=(o(\"0a58\"),Object(g[\"a\"])(B,s,r,!1,null,\"7158bd58\",null)),N=M.exports,q={name:\"CreateArticle\",components:{ArticleDetail:N}},z=q,H=Object(g[\"a\"])(z,n,a,!1,null,null,null);e[\"default\"]=H.exports},\"760f\":function(t,e,o){}}]);","extractedComments":[]}